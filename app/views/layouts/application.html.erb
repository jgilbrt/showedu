<!DOCTYPE html>
<html>
  <head>
    <title>ShowUs</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <style>
      /* Dropdown menu hidden by default */
      #dropdown {
        position: absolute;
        right: 0;
        background: white;
        border: 1px solid #ccc;
        padding: 5px;
        display: none;
        min-width: 100px;
        z-index: 1000;
      }
      #dropdown a {
        display: block;
        padding: 5px 10px;
        text-decoration: none;
        color: black;
      }
      #dropdown a:hover {
        background-color: #eee;
      }
    </style>
  </head>

  <body>

<header style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f4f4f4;">
  <div>
    <%= link_to "ðŸ  Home", showus_path, style: "margin-right: 20px; font-weight: bold;" %>
    <% if user_signed_in? %>
      <%= link_to "âž•", new_showu_path, style: "font-size: 20px;" %>
    <% end %>
  </div>

 <div style="position: relative; display: inline-block;">
  <span id="avatar-icon" style="cursor: pointer;">ðŸ‘¤</span>
  <div id="dropdown" style="position: absolute; right: 0; background: white; border: 1px solid #ccc; padding: 5px; display: none;">
    <% if user_signed_in? %>
      <%= link_to "Profile", user_path(current_user), style: "display: block;" %>
      <%= link_to "Sign Out", destroy_user_session_path, method: :delete, style: "display: block;" %>
    <% else %>
      <%= link_to "Sign In", new_user_session_path, style: "display: block;" %>
    <% end %>
  </div>
</div>

</header>

    <div style="padding: 20px;">
      <%= yield %>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const avatarIcon = document.getElementById('avatar-icon');
        const dropdown = document.getElementById('dropdown');

        avatarIcon.addEventListener('click', () => {
          dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        });

        // Hide dropdown if clicking outside
        document.addEventListener('click', (event) => {
          if (!avatarIcon.contains(event.target) && !dropdown.contains(event.target)) {
            dropdown.style.display = 'none';
          }
        });
      });
    </script>
  </body>
</html>
